<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randomizer</title>
    <style>
        /* CSS for the White Background and Red-Gold Accent Theme */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff; /* White background */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        /* Container is now the main vertical holder */
        .container {
            display: flex;
            flex-direction: column; /* Stack elements vertically */
            width: 90%;
            max-width: 1000px; /* Max width for the whole site */
            gap: 20px;
        }

        /* --- Top Section: Randomizer and Buttons --- */
        .top-section {
            padding: 30px;
            background-color: #f8f8f8;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
        }

        h1 {
            color: #d32f2f; /* Deep Red accent for main title */
            font-size: 2.8em; /* Increased Header Size */
            border-bottom: 3px solid #ffc107; /* Gold accent border */
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        /* --- Middle Box Styling (Taller and Centered) --- */
        #result-container {
            display: flex;
            justify-content: center;
            align-items: center; /* Center digits vertically */
            margin: 20px auto 40px auto;
            width: 90%; /* Take up most of the available width */
            height: 150px; /* Increased height */
            border: 5px solid #ffc107;
            border-radius: 8px;
            background-color: #fffaf0;
            font-size: 8em;
            color: #d32f2f;
            font-weight: bold;
            letter-spacing: 5px; 
        }

        .digit-display {
            width: 0.8em;
            text-align: center;
        }

        /* Button Layout Adjustment */
        .button-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 10px;
        }

        button {
            padding: 15px 30px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        #drawButton {
            background-color: #d32f2f; 
            color: white;
            flex: 1; /* Allow button to stretch */
            max-width: 250px;
        }

        #resetButton {
            background-color: #ffc107; /* Gold button */
            color: #333;
            flex: 1; /* Allow button to stretch */
            max-width: 150px;
        }

        /* --- Bottom Section: History --- */
        .history-section {
            padding: 20px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        h2 {
            color: #ffc107; /* Gold accent for history title */
            border-bottom: 2px solid #d32f2f; /* Deep Red accent border */
            padding-bottom: 5px;
            margin-top: 0;
            margin-bottom: 15px;
        }

        #pickedNumbers {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        #pickedNumbers li {
            background-color: #ffe0b2; 
            color: #d32f2f; 
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: 600;
            font-size: 1.1em;
            border: 1px solid #ffb74d; 
        }
        
        #statusMessage {
            color: #d32f2f;
            font-weight: bold;
            margin-top: 15px;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="top-section">
            <h1>ðŸŽ° Randomizer</h1>
            
            <div id="result-container">
                </div>
            
            <div class="button-group">
                <button id="drawButton" onclick="startDraw()">DRAW NUMBER</button>
                <button id="resetButton" onclick="resetPicker()">RESET</button>
            </div>
            
            <div id="statusMessage"></div>
        </div>

        <div class="history-section">
            <h2>ðŸ“œ Recent Numbers</h2>
            <ul id="pickedNumbers">
                </ul>
        </div>
    </div>

    <script>
        const MIN_NUM = 1;
        const MAX_NUM = 300;
        const DIGIT_COUNT = 3;
        const CYCLE_DURATION = 4000;
        const DIGIT_STOP_DELAY = 500;
        const CYCLE_SPEED = 50;

        let availableNumbers = [];
        let pickedNumbers = [];
        let isDrawing = false;
        let cycleIntervals = [];

        const resultContainer = document.getElementById('result-container');
        const pickedNumbersList = document.getElementById('pickedNumbers');
        const drawButton = document.getElementById('drawButton');
        const statusMessage = document.getElementById('statusMessage');

        function initializeNumbers() {
            availableNumbers = [];
            for (let i = MIN_NUM; i <= MAX_NUM; i++) {
                availableNumbers.push(i);
            }
            pickedNumbers = [];
            updateDisplay(MIN_NUM); 
        }

        function formatNumber(num) {
            return String(num).padStart(DIGIT_COUNT, '0');
        }

        function setupDigitDisplay(initialText) {
            resultContainer.innerHTML = '';
            for (let i = 0; i < DIGIT_COUNT; i++) {
                const digitSpan = document.createElement('span');
                digitSpan.className = 'digit-display';
                digitSpan.id = `digit-${i}`;
                digitSpan.textContent = initialText[i];
                resultContainer.appendChild(digitSpan);
            }
        }
        
        function startDigitCycling(index) {
            const digitElement = document.getElementById(`digit-${index}`);
            const interval = setInterval(() => {
                digitElement.textContent = Math.floor(Math.random() * 10);
            }, CYCLE_SPEED);

            cycleIntervals[index] = interval;
        }

        function stopDigitCycling(index, finalDigit) {
            clearInterval(cycleIntervals[index]);
            
            const digitElement = document.getElementById(`digit-${index}`);
            digitElement.textContent = finalDigit;
        }

        function startDraw() {
            if (isDrawing || availableNumbers.length === 0) return;
            
            isDrawing = true;
            drawButton.disabled = true;
            statusMessage.textContent = '...Drawing...';
            cycleIntervals = [];

            const selectedNumber = drawRandomNumber();
            const targetString = formatNumber(selectedNumber);
            
            // 1. Start cycling all three digits
            for (let i = 0; i < DIGIT_COUNT; i++) {
                startDigitCycling(i);
            }

            // 2. Schedule the staggered stop for each digit
            for (let i = 0; i < DIGIT_COUNT; i++) {
                setTimeout(() => {
                    stopDigitCycling(i, targetString[i]);
                }, CYCLE_DURATION + (i * DIGIT_STOP_DELAY));
            }

            // 3. Schedule the final update after all digits have stopped
            setTimeout(() => {
                isDrawing = false;
                updateSidebar(); 
            }, CYCLE_DURATION + (DIGIT_COUNT * DIGIT_STOP_DELAY) + 500); 
        }

        function drawRandomNumber() {
            if (availableNumbers.length === 0) return 0; 
            
            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            const selectedNumber = availableNumbers[randomIndex];
            availableNumbers.splice(randomIndex, 1); 
            pickedNumbers.push(selectedNumber);
            return selectedNumber;
        }

        function updateSidebar() {
            if (availableNumbers.length === 0) {
                drawButton.disabled = true;
                statusMessage.textContent = 'All numbers have been picked!';
            } else {
                drawButton.disabled = false;
                statusMessage.textContent = '';
            }

            pickedNumbersList.innerHTML = ''; 
            const sortedPicked = [...pickedNumbers].sort((a, b) => a - b); 

            sortedPicked.forEach(number => {
                const li = document.createElement('li');
                li.textContent = formatNumber(number);
                pickedNumbersList.appendChild(li);
            });
        }
        
        function updateDisplay(initialNumber) {
            setupDigitDisplay(formatNumber(initialNumber));
            updateSidebar();
        }

        function resetPicker() {
            if (confirm("Are you sure you want to reset and clear all picked numbers?")) {
                initializeNumbers();
                statusMessage.textContent = '';
            }
        }

        document.addEventListener('DOMContentLoaded', initializeNumbers);
    </script>
</body>
</html>

