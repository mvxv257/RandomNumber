<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Randomizer</title>
    <style>
        /* CSS for the White Background and Red-Gold Accent Theme */
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #ffffff; /* White background */
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .container {
            display: flex;
            width: 90%;
            max-width: 1200px;
            gap: 30px;
        }

        .main-content {
            flex: 2;
            padding: 30px;
            background-color: #f8f8f8;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center; 
        }

        .sidebar {
            flex: 1;
            padding: 20px;
            background-color: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            max-height: 80vh;
            overflow-y: auto;
        }

        h1 {
            color: #d32f2f;
            border-bottom: 3px solid #ffc107;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }

        h2 {
            color: #ffc107;
            border-bottom: 2px solid #d32f2f;
            padding-bottom: 5px;
            margin-top: 0;
            margin-bottom: 15px;
        }

        /* --- Number Display Styles --- */
        #result-container {
            display: flex;
            justify-content: center;
            align-items: center; /* Center digits vertically */
            margin: 40px 0 60px 0;
            height: 120px; /* Fixed height based on 8em font size */
            border: 5px solid #ffc107;
            border-radius: 8px;
            background-color: #fffaf0;
            font-size: 8em;
            color: #d32f2f;
            font-weight: bold;
            letter-spacing: 5px; 
        }

        .digit-display {
            width: 0.8em; /* Fixed width for digits */
            text-align: center;
            /* Optional: Add a transition for a subtle fade effect when numbers change */
            transition: color 0.1s ease-in-out; 
        }

        /* --- Button Styles --- */
        button {
            display: block;
            width: 80%;
            max-width: 400px;
            margin: 0 auto 15px auto;
            padding: 15px;
            font-size: 1.2em;
            font-weight: bold;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s, transform 0.1s;
        }

        #drawButton {
            background-color: #d32f2f; 
            color: white;
        }

        #drawButton:disabled {
            background-color: #bdbdbd;
            cursor: not-allowed;
            color: #757575;
        }

        #resetButton {
            background-color: #ffc107; 
            color: #333;
        }

        /* --- Sidebar Styles --- */
        #pickedNumbers {
            list-style: none;
            padding: 0;
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        #pickedNumbers li {
            background-color: #ffe0b2; 
            color: #d32f2f; 
            padding: 5px 10px;
            border-radius: 5px;
            font-weight: 600;
            font-size: 1.1em;
            border: 1px solid #ffb74d; 
        }
        
        #statusMessage {
            color: #d32f2f;
            font-weight: bold;
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="main-content">
            <h1>ðŸŽ° Randomizer</h1>
            
            <div id="result-container">
                </div>
            
            <button id="drawButton" onclick="startDraw()">DRAW NUMBER</button>
            <button id="resetButton" onclick="resetPicker()">RESET ALL NUMBERS</button>
            
            <div id="statusMessage"></div>
        </div>

        <div class="sidebar">
            <h2>ðŸ“œ Picked Numbers History</h2>
            <ul id="pickedNumbers">
                </ul>
        </div>
    </div>

    <script>
        const MIN_NUM = 1;
        const MAX_NUM = 300;
        const DIGIT_COUNT = 3;
        const CYCLE_DURATION = 2000; // Time the cycling runs for
        const DIGIT_STOP_DELAY = 300; // Delay between digits stopping
        const CYCLE_SPEED = 50; // Milliseconds between random number changes

        let availableNumbers = [];
        let pickedNumbers = [];
        let isDrawing = false;
        let cycleIntervals = []; // To hold the cycling timers

        const resultContainer = document.getElementById('result-container');
        const pickedNumbersList = document.getElementById('pickedNumbers');
        const drawButton = document.getElementById('drawButton');
        const statusMessage = document.getElementById('statusMessage');

        function initializeNumbers() {
            availableNumbers = [];
            for (let i = MIN_NUM; i <= MAX_NUM; i++) {
                availableNumbers.push(i);
            }
            pickedNumbers = [];
            // Reset display to '001'
            updateDisplay(MIN_NUM); 
        }

        function formatNumber(num) {
            return String(num).padStart(DIGIT_COUNT, '0');
        }

        /**
         * Sets up the HTML structure for static digit display.
         */
        function setupDigitDisplay(initialText) {
            resultContainer.innerHTML = '';
            for (let i = 0; i < DIGIT_COUNT; i++) {
                const digitSpan = document.createElement('span');
                digitSpan.className = 'digit-display';
                digitSpan.id = `digit-${i}`;
                digitSpan.textContent = initialText[i];
                resultContainer.appendChild(digitSpan);
            }
        }
        
        /**
         * The core function that cycles a single digit randomly.
         */
        function startDigitCycling(index) {
            const digitElement = document.getElementById(`digit-${index}`);
            // Use a specific interval for each digit to control its cycling
            const interval = setInterval(() => {
                // Generate a random digit (0-9)
                digitElement.textContent = Math.floor(Math.random() * 10);
            }, CYCLE_SPEED);

            cycleIntervals[index] = interval;
        }

        /**
         * Stops the cycling interval for a specific digit and locks its final value.
         */
        function stopDigitCycling(index, finalDigit) {
            // Stop the cycling interval
            clearInterval(cycleIntervals[index]);
            
            // Lock the digit to its final value
            const digitElement = document.getElementById(`digit-${index}`);
            digitElement.textContent = finalDigit;
        }

        /**
         * Starts the drawing process, including the random cycling effect.
         */
        function startDraw() {
            if (isDrawing || availableNumbers.length === 0) return;
            
            isDrawing = true;
            drawButton.disabled = true;
            statusMessage.textContent = '...Drawing...';
            cycleIntervals = []; // Clear old intervals

            const selectedNumber = drawRandomNumber();
            const targetString = formatNumber(selectedNumber);
            
            // 1. Start cycling all three digits
            for (let i = 0; i < DIGIT_COUNT; i++) {
                startDigitCycling(i);
            }

            // 2. Schedule the staggered stop for each digit
            for (let i = 0; i < DIGIT_COUNT; i++) {
                setTimeout(() => {
                    stopDigitCycling(i, targetString[i]);
                }, CYCLE_DURATION + (i * DIGIT_STOP_DELAY));
            }

            // 3. Schedule the final update after all digits have stopped
            setTimeout(() => {
                isDrawing = false;
                updateSidebar(); 
            }, CYCLE_DURATION + (DIGIT_COUNT * DIGIT_STOP_DELAY) + 500); 
        }

        function drawRandomNumber() {
            if (availableNumbers.length === 0) return 0; 
            
            const randomIndex = Math.floor(Math.random() * availableNumbers.length);
            const selectedNumber = availableNumbers[randomIndex];
            availableNumbers.splice(randomIndex, 1); 
            pickedNumbers.push(selectedNumber);
            return selectedNumber;
        }

        function updateSidebar() {
            if (availableNumbers.length === 0) {
                drawButton.disabled = true;
                statusMessage.textContent = 'All numbers have been picked!';
            } else {
                drawButton.disabled = false;
                statusMessage.textContent = '';
            }

            // Re-render the picked numbers list (sidebar)
            pickedNumbersList.innerHTML = ''; 
            const sortedPicked = [...pickedNumbers].sort((a, b) => a - b); 

            sortedPicked.forEach(number => {
                const li = document.createElement('li');
                li.textContent = formatNumber(number);
                pickedNumbersList.appendChild(li);
            });
        }
        
        function updateDisplay(initialNumber) {
            setupDigitDisplay(formatNumber(initialNumber));
            updateSidebar();
        }

        function resetPicker() {
            if (confirm("Are you sure you want to reset and clear all picked numbers?")) {
                initializeNumbers();
                statusMessage.textContent = '';
            }
        }

        document.addEventListener('DOMContentLoaded', initializeNumbers);
    </script>
</body>
</html>
